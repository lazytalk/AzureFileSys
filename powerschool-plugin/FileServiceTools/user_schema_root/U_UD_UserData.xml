<psExtension xmlns="http://www.powerschool.com"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.powerschool.com psextension.xsd">

  <extensionname>U_UD_UserData</extensionname>

  <extendedTable type="standalone"
                 dbTableName="u_ud_category"
                 childName="u_ud_category"
                 comment="User Data - Category master (e.g. MAP Scores, Club Experience, Skillsets)">
    <index name="u_ud_category_code_idx">
      <column name="code"/>
    </index>

    <field name="name" type="String" length="200"/>
    <field name="code" type="String" length="60"/>
    <field name="is_active" type="Boolean"/>
    <field name="sort_order" type="Integer"/>
    <field name="created_on" type="Date"/>
    <field name="created_by" type="String" length="100"/>
    <field name="updated_on" type="Date"/>
    <field name="updated_by" type="String" length="100"/>
  </extendedTable>

  <extendedTable type="standalone"
                 dbTableName="u_ud_fielddef"
                 childName="u_ud_fielddef"
                 comment="User Data - Field definitions per category">
    <index name="u_ud_fielddef_cat_idx">
      <column name="category_id"/>
    </index>
    <index name="u_ud_fielddef_cat_key_idx">
      <column name="category_id"/>
      <column name="field_key"/>
    </index>

    <field name="category_id" type="Integer" isIndexed="true"/>
    <field name="field_key" type="String" length="100"/>
    <field name="field_label" type="String" length="200"/>
    <field name="value_type" type="String" length="20"/>
    <field name="required" type="Boolean"/>
    <field name="sort_order" type="Integer"/>
    <field name="help_text" type="String" length="1000"/>
    <field name="created_on" type="Date"/>
    <field name="created_by" type="String" length="100"/>
    <field name="updated_on" type="Date"/>
    <field name="updated_by" type="String" length="100"/>
  </extendedTable>

  <extendedTable type="standalone"
                 dbTableName="u_ud_record"
                 childName="u_ud_record"
                 comment="User Data - Record header (per user, per category)">
    <index name="u_ud_record_users_cat_idx">
      <column name="usersdcid"/>
      <column name="category_id"/>
    </index>
    <index name="u_ud_record_cat_idx">
      <column name="category_id"/>
    </index>

    <field name="usersdcid" type="Integer" isIndexed="true"/>
    <field name="category_id" type="Integer" isIndexed="true"/>
    <field name="created_on" type="Date"/>
    <field name="created_by" type="String" length="100"/>
    <field name="updated_on" type="Date"/>
    <field name="updated_by" type="String" length="100"/>
  </extendedTable>

  <extendedTable coreTable="u_ud_record"
                 dbTableName="u_ud_value"
                 childName="u_ud_value"
                 comment="User Data - Values per record + fielddef">
    <index name="u_ud_value_record_idx">
      <column name="record_id"/>
    </index>
    <index name="u_ud_value_record_field_idx">
      <column name="record_id"/>
      <column name="fielddef_id"/>
    </index>

    <field name="record_id" type="Integer" isIndexed="true"/>
    <field name="fielddef_id" type="Integer" isIndexed="true"/>

    <field name="value_str" type="String" length="4000"/>
    <field name="value_num" type="Double"/>
    <field name="value_date" type="Date"/>
    <field name="value_bool" type="Boolean"/>
    <field name="value_text" type="Clob"/>

    <field name="created_on" type="Date"/>
    <field name="created_by" type="String" length="100"/>
    <field name="updated_on" type="Date"/>
    <field name="updated_by" type="String" length="100"/>
  </extendedTable>

</psExtension>
